"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _middlewares_apis_authMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/apis/authMiddleware */ \"(middleware)/./middlewares/apis/authMiddleware.ts\");\n/* harmony import */ var _middlewares_apis_loggingMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/apis/loggingMiddleware */ \"(middleware)/./middlewares/apis/loggingMiddleware.ts\");\n/* harmony import */ var _app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route */ \"(middleware)/./src/app/api/auth/[...nextauth]/route.ts\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth */ \"(middleware)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_4__);\n// import { NextRequest, NextResponse } from \"next/server\";\n// import { authMiddleware } from \"../middlewares/apis/authMiddleware\";\n// import { loggingMiddleware } from \"../middlewares/apis/loggingMiddleware\";\n// import {getServerSession} from 'next-auth'\n// export const config = {\n//     matcher: \"/api/:path*\"\n// }\n// const protectedRoutes = [\"/middlewareComp\"]\n// export async function  middleware(request:NextRequest){\n//     const session = await getServerSession()\n//     if(!session && protectedRoutes.includes(request.nextUrl.pathname)){\n//         const abosulteUrl = new URL('/', request.nextUrl.origin)\n//         return NextResponse.redirect(abosulteUrl.toString())\n//     }\n//     // if(request.url.includes(\"/api/notes\")){\n//     //     const logResult = loggingMiddleware(request)\n//     //     console.log(\"logResult\",logResult.response)\n//     // }\n//     // const authResult = authMiddleware(request)\n//     // if(!authResult?.isValid){\n//     //     return new NextResponse(JSON.stringify({message: 'unauthorized'}), {status: 401})\n//     // }\n//     const requestHeaders = new Headers(request.headers);\n//   const response = NextResponse.next({\n//     request: {\n//       headers: requestHeaders,\n//     },\n//   });\n//   return response;\n// }\n\n\n\n\n\nconst { authOptions } = next_auth__WEBPACK_IMPORTED_MODULE_4___default()(_app_api_auth_nextauth_route__WEBPACK_IMPORTED_MODULE_3__.authConfig);\nconst config = {\n    matcher: [\n        \"/api\",\n        \"/middlewareComp\"\n    ]\n};\nconst protectedRoutes = [\n    \"/middlewareComp\"\n];\nasync function middleware(request) {\n    // let token:any =  cookies()?.get('midToken');\n    //   const session = await getServerSession();\n    const session = await authOptions();\n    // Check if the session is missing and the route is protected\n    if (protectedRoutes.includes(request.nextUrl.pathname)) {\n        const absoluteUrl = new URL(\"/\", request.nextUrl.origin);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(absoluteUrl.toString());\n    }\n    // Perform logging if the request URL includes \"/api/notes\"\n    if (request.url.includes(\"/api/notes\")) {\n        const logResult = (0,_middlewares_apis_loggingMiddleware__WEBPACK_IMPORTED_MODULE_2__.loggingMiddleware)(request);\n        console.log(\"logResult\", logResult.response);\n    }\n    // Check authentication validity using authMiddleware\n    const authResult = (0,_middlewares_apis_authMiddleware__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(request);\n    if (!authResult?.isValid) {\n        // Return a response immediately if the user is not authorized\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            message: \"unauthorized\"\n        }), {\n            status: 401\n        });\n    }\n    // If no early return has occurred, proceed with the request\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSwyREFBMkQ7QUFDM0QsdUVBQXVFO0FBQ3ZFLDZFQUE2RTtBQUM3RSw2Q0FBNkM7QUFFN0MsMEJBQTBCO0FBQzFCLDZCQUE2QjtBQUM3QixJQUFJO0FBRUosOENBQThDO0FBRTlDLDBEQUEwRDtBQUMxRCwrQ0FBK0M7QUFFL0MsMEVBQTBFO0FBQzFFLG1FQUFtRTtBQUNuRSwrREFBK0Q7QUFDL0QsUUFBUTtBQUNSLGlEQUFpRDtBQUNqRCwwREFBMEQ7QUFDMUQseURBQXlEO0FBQ3pELFdBQVc7QUFDWCxvREFBb0Q7QUFFcEQsbUNBQW1DO0FBQ25DLCtGQUErRjtBQUMvRixXQUFXO0FBQ1gsMkRBQTJEO0FBQzNELHlDQUF5QztBQUN6QyxpQkFBaUI7QUFDakIsaUNBQWlDO0FBQ2pDLFNBQVM7QUFDVCxRQUFRO0FBQ1IscUJBQXFCO0FBQ3JCLElBQUk7QUFHb0Q7QUFDWTtBQUNNO0FBR1Y7QUFDaEM7QUFFaEMsTUFBTSxFQUFDSyxXQUFXLEVBQUMsR0FBR0QsZ0RBQVFBLENBQUNELG9FQUFVQTtBQUVsQyxNQUFNRyxTQUFTO0lBQ3BCQyxTQUFTO1FBQUM7UUFBUTtLQUFrQjtBQUN0QyxFQUFFO0FBRUYsTUFBTUMsa0JBQWtCO0lBQUM7Q0FBa0I7QUFFcEMsZUFBZUMsV0FBV0MsT0FBb0I7SUFDakQsK0NBQStDO0lBRW5ELDhDQUE4QztJQUU5QyxNQUFNQyxVQUFVLE1BQU1OO0lBQ3BCLDZEQUE2RDtJQUM3RCxJQUFLRyxnQkFBZ0JJLFFBQVEsQ0FBQ0YsUUFBUUcsT0FBTyxDQUFDQyxRQUFRLEdBQUc7UUFDdkQsTUFBTUMsY0FBYyxJQUFJQyxJQUFJLEtBQUtOLFFBQVFHLE9BQU8sQ0FBQ0ksTUFBTTtRQUN2RCxPQUFPakIscURBQVlBLENBQUNrQixRQUFRLENBQUNILFlBQVlJLFFBQVE7SUFDbkQ7SUFFQSwyREFBMkQ7SUFDM0QsSUFBSVQsUUFBUVUsR0FBRyxDQUFDUixRQUFRLENBQUMsZUFBZTtRQUN0QyxNQUFNUyxZQUFZbkIsc0ZBQWlCQSxDQUFDUTtRQUNwQ1ksUUFBUUMsR0FBRyxDQUFDLGFBQWFGLFVBQVVHLFFBQVE7SUFDN0M7SUFFQSxxREFBcUQ7SUFDckQsTUFBTUMsYUFBYXhCLGdGQUFjQSxDQUFDUztJQUVsQyxJQUFJLENBQUNlLFlBQVlDLFNBQVM7UUFDeEIsOERBQThEO1FBQzlELE9BQU8sSUFBSTFCLHFEQUFZQSxDQUFDMkIsS0FBS0MsU0FBUyxDQUFDO1lBQUVDLFNBQVM7UUFBZSxJQUFJO1lBQ25FQyxRQUFRO1FBQ1Y7SUFDRjtJQUVBLDREQUE0RDtJQUM1RCxPQUFPOUIscURBQVlBLENBQUMrQixJQUFJO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9taWRkbGV3YXJlLnRzP2QxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuLy8gaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvYXBpcy9hdXRoTWlkZGxld2FyZVwiO1xuLy8gaW1wb3J0IHsgbG9nZ2luZ01pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvYXBpcy9sb2dnaW5nTWlkZGxld2FyZVwiO1xuLy8gaW1wb3J0IHtnZXRTZXJ2ZXJTZXNzaW9ufSBmcm9tICduZXh0LWF1dGgnXG5cbi8vIGV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4vLyAgICAgbWF0Y2hlcjogXCIvYXBpLzpwYXRoKlwiXG4vLyB9XG5cbi8vIGNvbnN0IHByb3RlY3RlZFJvdXRlcyA9IFtcIi9taWRkbGV3YXJlQ29tcFwiXVxuXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gIG1pZGRsZXdhcmUocmVxdWVzdDpOZXh0UmVxdWVzdCl7XG4vLyAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oKVxuXG4vLyAgICAgaWYoIXNlc3Npb24gJiYgcHJvdGVjdGVkUm91dGVzLmluY2x1ZGVzKHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSkpe1xuLy8gICAgICAgICBjb25zdCBhYm9zdWx0ZVVybCA9IG5ldyBVUkwoJy8nLCByZXF1ZXN0Lm5leHRVcmwub3JpZ2luKVxuLy8gICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGFib3N1bHRlVXJsLnRvU3RyaW5nKCkpXG4vLyAgICAgfVxuLy8gICAgIC8vIGlmKHJlcXVlc3QudXJsLmluY2x1ZGVzKFwiL2FwaS9ub3Rlc1wiKSl7XG4vLyAgICAgLy8gICAgIGNvbnN0IGxvZ1Jlc3VsdCA9IGxvZ2dpbmdNaWRkbGV3YXJlKHJlcXVlc3QpXG4vLyAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwibG9nUmVzdWx0XCIsbG9nUmVzdWx0LnJlc3BvbnNlKVxuLy8gICAgIC8vIH1cbi8vICAgICAvLyBjb25zdCBhdXRoUmVzdWx0ID0gYXV0aE1pZGRsZXdhcmUocmVxdWVzdClcblxuLy8gICAgIC8vIGlmKCFhdXRoUmVzdWx0Py5pc1ZhbGlkKXtcbi8vICAgICAvLyAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe21lc3NhZ2U6ICd1bmF1dGhvcml6ZWQnfSksIHtzdGF0dXM6IDQwMX0pXG4vLyAgICAgLy8gfVxuLy8gICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKTtcbi8vICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XG4vLyAgICAgcmVxdWVzdDoge1xuLy8gICAgICAgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMsXG4vLyAgICAgfSxcbi8vICAgfSk7XG4vLyAgIHJldHVybiByZXNwb25zZTtcbi8vIH1cblxuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBhdXRoTWlkZGxld2FyZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9hcGlzL2F1dGhNaWRkbGV3YXJlXCI7XG5pbXBvcnQgeyBsb2dnaW5nTWlkZGxld2FyZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9hcGlzL2xvZ2dpbmdNaWRkbGV3YXJlXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJzsgXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xuaW1wb3J0IHsgYXV0aENvbmZpZyB9IGZyb20gXCIuL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlXCI7XG5pbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiXG5cbmNvbnN0IHthdXRoT3B0aW9uc30gPSBOZXh0QXV0aChhdXRoQ29uZmlnKVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXCIvYXBpXCIsIFwiL21pZGRsZXdhcmVDb21wXCJdLFxufTtcblxuY29uc3QgcHJvdGVjdGVkUm91dGVzID0gW1wiL21pZGRsZXdhcmVDb21wXCJdO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAgIC8vIGxldCB0b2tlbjphbnkgPSAgY29va2llcygpPy5nZXQoJ21pZFRva2VuJyk7XG5cbi8vICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oKTtcblxuY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGhPcHRpb25zKClcbiAgLy8gQ2hlY2sgaWYgdGhlIHNlc3Npb24gaXMgbWlzc2luZyBhbmQgdGhlIHJvdXRlIGlzIHByb3RlY3RlZFxuICBpZiAoIHByb3RlY3RlZFJvdXRlcy5pbmNsdWRlcyhyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUpKSB7XG4gICAgY29uc3QgYWJzb2x1dGVVcmwgPSBuZXcgVVJMKFwiL1wiLCByZXF1ZXN0Lm5leHRVcmwub3JpZ2luKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KGFic29sdXRlVXJsLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLy8gUGVyZm9ybSBsb2dnaW5nIGlmIHRoZSByZXF1ZXN0IFVSTCBpbmNsdWRlcyBcIi9hcGkvbm90ZXNcIlxuICBpZiAocmVxdWVzdC51cmwuaW5jbHVkZXMoXCIvYXBpL25vdGVzXCIpKSB7XG4gICAgY29uc3QgbG9nUmVzdWx0ID0gbG9nZ2luZ01pZGRsZXdhcmUocmVxdWVzdCk7XG4gICAgY29uc29sZS5sb2coXCJsb2dSZXN1bHRcIiwgbG9nUmVzdWx0LnJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uIHZhbGlkaXR5IHVzaW5nIGF1dGhNaWRkbGV3YXJlXG4gIGNvbnN0IGF1dGhSZXN1bHQgPSBhdXRoTWlkZGxld2FyZShyZXF1ZXN0KTtcblxuICBpZiAoIWF1dGhSZXN1bHQ/LmlzVmFsaWQpIHtcbiAgICAvLyBSZXR1cm4gYSByZXNwb25zZSBpbW1lZGlhdGVseSBpZiB0aGUgdXNlciBpcyBub3QgYXV0aG9yaXplZFxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogXCJ1bmF1dGhvcml6ZWRcIiB9KSwge1xuICAgICAgc3RhdHVzOiA0MDEsXG4gICAgfSk7XG4gIH1cblxuICAvLyBJZiBubyBlYXJseSByZXR1cm4gaGFzIG9jY3VycmVkLCBwcm9jZWVkIHdpdGggdGhlIHJlcXVlc3RcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYXV0aE1pZGRsZXdhcmUiLCJsb2dnaW5nTWlkZGxld2FyZSIsImF1dGhDb25maWciLCJOZXh0QXV0aCIsImF1dGhPcHRpb25zIiwiY29uZmlnIiwibWF0Y2hlciIsInByb3RlY3RlZFJvdXRlcyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsImluY2x1ZGVzIiwibmV4dFVybCIsInBhdGhuYW1lIiwiYWJzb2x1dGVVcmwiLCJVUkwiLCJvcmlnaW4iLCJyZWRpcmVjdCIsInRvU3RyaW5nIiwidXJsIiwibG9nUmVzdWx0IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiYXV0aFJlc3VsdCIsImlzVmFsaWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsIm5leHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});