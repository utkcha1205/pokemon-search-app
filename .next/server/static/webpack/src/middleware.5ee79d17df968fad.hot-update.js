"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _middlewares_apis_authMiddleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/apis/authMiddleware */ \"(middleware)/./middlewares/apis/authMiddleware.ts\");\n/* harmony import */ var _middlewares_apis_loggingMiddleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/apis/loggingMiddleware */ \"(middleware)/./middlewares/apis/loggingMiddleware.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n// import { NextRequest, NextResponse } from \"next/server\";\n// import { authMiddleware } from \"../middlewares/apis/authMiddleware\";\n// import { loggingMiddleware } from \"../middlewares/apis/loggingMiddleware\";\n// import {getServerSession} from 'next-auth'\n// export const config = {\n//     matcher: \"/api/:path*\"\n// }\n// const protectedRoutes = [\"/middlewareComp\"]\n// export async function  middleware(request:NextRequest){\n//     const session = await getServerSession()\n//     if(!session && protectedRoutes.includes(request.nextUrl.pathname)){\n//         const abosulteUrl = new URL('/', request.nextUrl.origin)\n//         return NextResponse.redirect(abosulteUrl.toString())\n//     }\n//     // if(request.url.includes(\"/api/notes\")){\n//     //     const logResult = loggingMiddleware(request)\n//     //     console.log(\"logResult\",logResult.response)\n//     // }\n//     // const authResult = authMiddleware(request)\n//     // if(!authResult?.isValid){\n//     //     return new NextResponse(JSON.stringify({message: 'unauthorized'}), {status: 401})\n//     // }\n//     const requestHeaders = new Headers(request.headers);\n//   const response = NextResponse.next({\n//     request: {\n//       headers: requestHeaders,\n//     },\n//   });\n//   return response;\n// }\n\n\n\n\nconst config = {\n    matcher: [\n        \"/api\",\n        \"/middlewareComp\"\n    ]\n};\nconst protectedRoutes = [\n    \"/middlewareComp\"\n];\nasync function middleware(request) {\n    let token = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)()?.get(\"midToken\");\n    // Fetch the session once and await it if it is an async operation\n    //   const session = await getServerSession();\n    //   console.log(session,\"seeeeeee\")\n    // Check if the session is missing and the route is protected\n    if (!token.value && protectedRoutes.includes(request.nextUrl.pathname)) {\n        const absoluteUrl = new URL(\"/\", request.nextUrl.origin);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(absoluteUrl.toString());\n    }\n    // Perform logging if the request URL includes \"/api/notes\"\n    if (request.url.includes(\"/api/notes\")) {\n        const logResult = (0,_middlewares_apis_loggingMiddleware__WEBPACK_IMPORTED_MODULE_2__.loggingMiddleware)(request);\n        console.log(\"logResult\", logResult.response);\n    }\n    // Check authentication validity using authMiddleware\n    const authResult = (0,_middlewares_apis_authMiddleware__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(request);\n    if (!authResult?.isValid) {\n        // Return a response immediately if the user is not authorized\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            message: \"unauthorized\"\n        }), {\n            status: 401\n        });\n    }\n    // If no early return has occurred, proceed with the request\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkRBQTJEO0FBQzNELHVFQUF1RTtBQUN2RSw2RUFBNkU7QUFDN0UsNkNBQTZDO0FBRTdDLDBCQUEwQjtBQUMxQiw2QkFBNkI7QUFDN0IsSUFBSTtBQUVKLDhDQUE4QztBQUU5QywwREFBMEQ7QUFDMUQsK0NBQStDO0FBRS9DLDBFQUEwRTtBQUMxRSxtRUFBbUU7QUFDbkUsK0RBQStEO0FBQy9ELFFBQVE7QUFDUixpREFBaUQ7QUFDakQsMERBQTBEO0FBQzFELHlEQUF5RDtBQUN6RCxXQUFXO0FBQ1gsb0RBQW9EO0FBRXBELG1DQUFtQztBQUNuQywrRkFBK0Y7QUFDL0YsV0FBVztBQUNYLDJEQUEyRDtBQUMzRCx5Q0FBeUM7QUFDekMsaUJBQWlCO0FBQ2pCLGlDQUFpQztBQUNqQyxTQUFTO0FBQ1QsUUFBUTtBQUNSLHFCQUFxQjtBQUNyQixJQUFJO0FBR29EO0FBQ1k7QUFDTTtBQUVuQztBQUVoQyxNQUFNSSxTQUFTO0lBQ3BCQyxTQUFTO1FBQUM7UUFBUTtLQUFrQjtBQUN0QyxFQUFFO0FBRUYsTUFBTUMsa0JBQWtCO0lBQUM7Q0FBa0I7QUFFcEMsZUFBZUMsV0FBV0MsT0FBb0I7SUFDakQsSUFBSUMsUUFBYU4scURBQU9BLElBQUlPLElBQUk7SUFFbEMsa0VBQWtFO0lBQ3BFLDhDQUE4QztJQUM5QyxvQ0FBb0M7SUFDbEMsNkRBQTZEO0lBQzdELElBQUksQ0FBQ0QsTUFBTUUsS0FBSyxJQUFJTCxnQkFBZ0JNLFFBQVEsQ0FBQ0osUUFBUUssT0FBTyxDQUFDQyxRQUFRLEdBQUc7UUFDdEUsTUFBTUMsY0FBYyxJQUFJQyxJQUFJLEtBQUtSLFFBQVFLLE9BQU8sQ0FBQ0ksTUFBTTtRQUN2RCxPQUFPakIscURBQVlBLENBQUNrQixRQUFRLENBQUNILFlBQVlJLFFBQVE7SUFDbkQ7SUFFQSwyREFBMkQ7SUFDM0QsSUFBSVgsUUFBUVksR0FBRyxDQUFDUixRQUFRLENBQUMsZUFBZTtRQUN0QyxNQUFNUyxZQUFZbkIsc0ZBQWlCQSxDQUFDTTtRQUNwQ2MsUUFBUUMsR0FBRyxDQUFDLGFBQWFGLFVBQVVHLFFBQVE7SUFDN0M7SUFFQSxxREFBcUQ7SUFDckQsTUFBTUMsYUFBYXhCLGdGQUFjQSxDQUFDTztJQUVsQyxJQUFJLENBQUNpQixZQUFZQyxTQUFTO1FBQ3hCLDhEQUE4RDtRQUM5RCxPQUFPLElBQUkxQixxREFBWUEsQ0FBQzJCLEtBQUtDLFNBQVMsQ0FBQztZQUFFQyxTQUFTO1FBQWUsSUFBSTtZQUNuRUMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSw0REFBNEQ7SUFDNUQsT0FBTzlCLHFEQUFZQSxDQUFDK0IsSUFBSTtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbWlkZGxld2FyZS50cz9kMTk5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbi8vIGltcG9ydCB7IGF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL2FwaXMvYXV0aE1pZGRsZXdhcmVcIjtcbi8vIGltcG9ydCB7IGxvZ2dpbmdNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL2FwaXMvbG9nZ2luZ01pZGRsZXdhcmVcIjtcbi8vIGltcG9ydCB7Z2V0U2VydmVyU2Vzc2lvbn0gZnJvbSAnbmV4dC1hdXRoJ1xuXG4vLyBleHBvcnQgY29uc3QgY29uZmlnID0ge1xuLy8gICAgIG1hdGNoZXI6IFwiL2FwaS86cGF0aCpcIlxuLy8gfVxuXG4vLyBjb25zdCBwcm90ZWN0ZWRSb3V0ZXMgPSBbXCIvbWlkZGxld2FyZUNvbXBcIl1cblxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uICBtaWRkbGV3YXJlKHJlcXVlc3Q6TmV4dFJlcXVlc3Qpe1xuLy8gICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKClcblxuLy8gICAgIGlmKCFzZXNzaW9uICYmIHByb3RlY3RlZFJvdXRlcy5pbmNsdWRlcyhyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUpKXtcbi8vICAgICAgICAgY29uc3QgYWJvc3VsdGVVcmwgPSBuZXcgVVJMKCcvJywgcmVxdWVzdC5uZXh0VXJsLm9yaWdpbilcbi8vICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChhYm9zdWx0ZVVybC50b1N0cmluZygpKVxuLy8gICAgIH1cbi8vICAgICAvLyBpZihyZXF1ZXN0LnVybC5pbmNsdWRlcyhcIi9hcGkvbm90ZXNcIikpe1xuLy8gICAgIC8vICAgICBjb25zdCBsb2dSZXN1bHQgPSBsb2dnaW5nTWlkZGxld2FyZShyZXF1ZXN0KVxuLy8gICAgIC8vICAgICBjb25zb2xlLmxvZyhcImxvZ1Jlc3VsdFwiLGxvZ1Jlc3VsdC5yZXNwb25zZSlcbi8vICAgICAvLyB9XG4vLyAgICAgLy8gY29uc3QgYXV0aFJlc3VsdCA9IGF1dGhNaWRkbGV3YXJlKHJlcXVlc3QpXG5cbi8vICAgICAvLyBpZighYXV0aFJlc3VsdD8uaXNWYWxpZCl7XG4vLyAgICAgLy8gICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHttZXNzYWdlOiAndW5hdXRob3JpemVkJ30pLCB7c3RhdHVzOiA0MDF9KVxuLy8gICAgIC8vIH1cbi8vICAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycyk7XG4vLyAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuLy8gICAgIHJlcXVlc3Q6IHtcbi8vICAgICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzLFxuLy8gICAgIH0sXG4vLyAgIH0pO1xuLy8gICByZXR1cm4gcmVzcG9uc2U7XG4vLyB9XG5cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvYXBpcy9hdXRoTWlkZGxld2FyZVwiO1xuaW1wb3J0IHsgbG9nZ2luZ01pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvYXBpcy9sb2dnaW5nTWlkZGxld2FyZVwiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7IFxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogW1wiL2FwaVwiLCBcIi9taWRkbGV3YXJlQ29tcFwiXSxcbn07XG5cbmNvbnN0IHByb3RlY3RlZFJvdXRlcyA9IFtcIi9taWRkbGV3YXJlQ29tcFwiXTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgICBsZXQgdG9rZW46YW55ID0gIGNvb2tpZXMoKT8uZ2V0KCdtaWRUb2tlbicpO1xuICAgIFxuICAvLyBGZXRjaCB0aGUgc2Vzc2lvbiBvbmNlIGFuZCBhd2FpdCBpdCBpZiBpdCBpcyBhbiBhc3luYyBvcGVyYXRpb25cbi8vICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oKTtcbi8vICAgY29uc29sZS5sb2coc2Vzc2lvbixcInNlZWVlZWVlXCIpXG4gIC8vIENoZWNrIGlmIHRoZSBzZXNzaW9uIGlzIG1pc3NpbmcgYW5kIHRoZSByb3V0ZSBpcyBwcm90ZWN0ZWRcbiAgaWYgKCF0b2tlbi52YWx1ZSAmJiBwcm90ZWN0ZWRSb3V0ZXMuaW5jbHVkZXMocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lKSkge1xuICAgIGNvbnN0IGFic29sdXRlVXJsID0gbmV3IFVSTChcIi9cIiwgcmVxdWVzdC5uZXh0VXJsLm9yaWdpbik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChhYnNvbHV0ZVVybC50b1N0cmluZygpKTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gbG9nZ2luZyBpZiB0aGUgcmVxdWVzdCBVUkwgaW5jbHVkZXMgXCIvYXBpL25vdGVzXCJcbiAgaWYgKHJlcXVlc3QudXJsLmluY2x1ZGVzKFwiL2FwaS9ub3Rlc1wiKSkge1xuICAgIGNvbnN0IGxvZ1Jlc3VsdCA9IGxvZ2dpbmdNaWRkbGV3YXJlKHJlcXVlc3QpO1xuICAgIGNvbnNvbGUubG9nKFwibG9nUmVzdWx0XCIsIGxvZ1Jlc3VsdC5yZXNwb25zZSk7XG4gIH1cblxuICAvLyBDaGVjayBhdXRoZW50aWNhdGlvbiB2YWxpZGl0eSB1c2luZyBhdXRoTWlkZGxld2FyZVxuICBjb25zdCBhdXRoUmVzdWx0ID0gYXV0aE1pZGRsZXdhcmUocmVxdWVzdCk7XG5cbiAgaWYgKCFhdXRoUmVzdWx0Py5pc1ZhbGlkKSB7XG4gICAgLy8gUmV0dXJuIGEgcmVzcG9uc2UgaW1tZWRpYXRlbHkgaWYgdGhlIHVzZXIgaXMgbm90IGF1dGhvcml6ZWRcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IFwidW5hdXRob3JpemVkXCIgfSksIHtcbiAgICAgIHN0YXR1czogNDAxLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSWYgbm8gZWFybHkgcmV0dXJuIGhhcyBvY2N1cnJlZCwgcHJvY2VlZCB3aXRoIHRoZSByZXF1ZXN0XG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImF1dGhNaWRkbGV3YXJlIiwibG9nZ2luZ01pZGRsZXdhcmUiLCJjb29raWVzIiwiY29uZmlnIiwibWF0Y2hlciIsInByb3RlY3RlZFJvdXRlcyIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwidG9rZW4iLCJnZXQiLCJ2YWx1ZSIsImluY2x1ZGVzIiwibmV4dFVybCIsInBhdGhuYW1lIiwiYWJzb2x1dGVVcmwiLCJVUkwiLCJvcmlnaW4iLCJyZWRpcmVjdCIsInRvU3RyaW5nIiwidXJsIiwibG9nUmVzdWx0IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiYXV0aFJlc3VsdCIsImlzVmFsaWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsIm5leHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});